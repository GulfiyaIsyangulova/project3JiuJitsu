(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{174:function(e,t,n){e.exports=n(402)},179:function(e,t,n){},180:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},181:function(e,t,n){},402:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(74),s=n.n(r),l=(n(179),n(45)),i=n(173),c=n(12),u=n(24),g=n(18),m=n(17),h=n(19),p=(n(180),n(181),n(30)),d=n(37),f=n.n(d),E=function e(){var t=this;Object(c.a)(this,e),this.signup=function(e,n){return t.service.post("/signup",{username:e,password:n}).then(function(e){return e.data})},this.login=function(e,n){return t.service.post("/login",{username:e,password:n}).then(function(e){return e.data})},this.currentUser=function(){return t.service.get("/getcurrentuser").then(function(e){return e.data})},this.logout=function(){return t.service.post("/logout",{}).then(function(e){return e.data})};var n=f.a.create({baseURL:"https://jiu-jitsu-locator.herokuapp.com/",withCredentials:!0});this.service=n},v=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.tryToSignUp=function(e){e.preventDefault();var t=n.state.usernameInput,a=n.state.passwordInput;n.service.signup(t,a).then(function(){n.props.toggleForm("signup"),n.props.getUser()})},n.state={usernameInput:"",passwordInput:""},n.service=new E,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.tryToSignUp},o.a.createElement("h3",null,"Signup For An Account"),o.a.createElement("legend",null,"Username"),o.a.createElement("input",{value:this.state.usernameInput,name:"usernameInput",onChange:this.handleChange}),o.a.createElement("legend",null,"Password"),o.a.createElement("input",{value:this.state.passwordInput,name:"passwordInput",onChange:this.handleChange}),o.a.createElement("button",null,"Submit"))}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.tryToLogin=function(e){e.preventDefault();var t=n.state.usernameInput,a=n.state.passwordInput;n.service.login(t,a).then(function(){n.props.toggleForm("login"),n.props.getUser()})},n.state={usernameInput:"",passwordInput:""},n.service=new E,n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement("form",{onSubmit:this.tryToLogin},o.a.createElement("h3",null,"Login"),o.a.createElement("legend",null,"Username"),o.a.createElement("input",{value:this.state.usernameInput,name:"usernameInput",onChange:this.handleChange}),o.a.createElement("legend",null,"Password"),o.a.createElement("input",{value:this.state.passwordInput,name:"passwordInput",onChange:this.handleChange}),o.a.createElement("button",null,"Submit"))}}]),t}(a.Component);var O=function(e){return o.a.createElement("nav",null,!e.theUser&&o.a.createElement("span",null,o.a.createElement("button",{onClick:function(){return e.toggleForm("login")}}," Login "),o.a.createElement("button",{onClick:function(){return e.toggleForm("signup")}},"Sign Up")),e.theUser&&o.a.createElement("span",null,o.a.createElement("button",{onClick:function(){e.pleaseLogOut().then(function(){e.getUser()})}},"Log Out "),o.a.createElement("h1",null,"Hello, Welcome to Jiu Jitsu locator ",e.theUser.username,"!")))};a.Component;var b,C=function(e){return console.log("the props in the details >>>>> ",e.info),o.a.createElement("div",{style:{border:"0.5px solid grey",height:"300px",borderRadius:"4px",width:"30%",float:"left",margin:"10px",padding:"10px"}},"This is Details component",o.a.createElement("h2",null,e.info.name),o.a.createElement("h6",null,e.info.formatted_phone_number),e.info.photo&&o.a.createElement("h2",null,"hi"),o.a.createElement("h6",null,e.info.rating))},I=n(53),w=n.n(I),j=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).showGyms=function(){return n.props.allTheGyms.map(function(e,t){return o.a.createElement("div",{key:t,gym:e._id},o.a.createElement("h3",null,e.name),o.a.createElement("p",{style:{maxWidth:"400px"}},e.address," "))})},n.state={editing:!1},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return w.a.fromAddress("{this.props.gym.address}").then(function(e){var t=e.results[0].geometry.location,n=t.lat,a=t.lng;console.log(n,a)},function(e){console.error(e)}),o.a.createElement("div",null,o.a.createElement("h2",null,"I am a GymsIndex component!!"),this.showGyms)}}]),t}(a.Component),L=n(54),S=n.n(L),U=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){n.setState({address:e})},n.handleSelect=function(e){Object(L.geocodeByAddress)(e).then(function(e){return Object(L.getLatLng)(e[0])}).then(function(e){return console.log("Success",e)}).catch(function(e){return console.error("Error",e)})},n.state={address:""},n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(S.a,{value:this.state.address,onChange:this.handleChange,onSelect:this.handleSelect},function(e){var t=e.getInputProps,n=e.suggestions,a=e.getSuggestionItemProps,r=e.loading;return o.a.createElement("div",null,o.a.createElement("input",t({placeholder:"Search Places ...",className:"location-search-input"})),o.a.createElement("div",{className:"autocomplete-dropdown-container"},r&&o.a.createElement("div",null,"Loading..."),n.filter(function(e){return e.types.includes("health")}).map(function(e){console.log(e.types.includes("health"));var t=e.active?"suggestion-item--active":"suggestion-item",n=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return o.a.createElement("div",a(e,{className:t,style:n}),o.a.createElement("span",null,e.description))})))})}}]),t}(o.a.Component),k=(n(112),n(75)),G=n(32);navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){b={lat:e.coords.latitude,lng:e.coords.longitude}}):b={lat:20,lng:-80};var A=Object(k.a)(Object(k.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry,drawing,places&key=AIzaSyCpGcRTL6DiWCcICDtehgpbBfr4DYVN__Q",loadingElement:o.a.createElement("div",{style:{height:"100%"}}),containerElement:o.a.createElement("div",{style:{height:"400px"}}),mapElement:o.a.createElement("div",{style:{height:"100%"}})}),G.withGoogleMap)(function(e){return o.a.createElement(G.GoogleMap,{defaultZoom:8,defaultCenter:b},e.geoLocations.map(function(t,n){return o.a.createElement(G.Marker,{key:n,position:{lat:t.lat,lng:t.lng},onClick:function(){return e.onToggleOpenInfoWindow(n,t)}},e.isOpen===n&&o.a.createElement(G.InfoWindow,{onCloseClick:e.onToggleOpenInfoWindow},o.a.createElement("div",null,o.a.createElement("h1",null,t.info.name),o.a.createElement("h2",null,t.info.address))))}),e.isMarkerShown&&o.a.createElement(G.Marker,{position:b,onClick:e.onToggleOpenInfoWindow},e.isOpen&&o.a.createElement(G.InfoWindow,{onCloseClick:e.onToggleOpenInfoWindow},o.a.createElement("h1",null,"test"))))}),T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).getAllGyms=function(){f.a.get("".concat("/","gyms")).then(function(e){var t=e.data;n.setState({listOfGyms:t,ready:!0}),console.log("GYMS INSIDE CALLBACK!"),console.log(n.state.listOfGyms),setTimeout(function(){n.setState({mapReady:!0})},1500),n.setGeoLocations()}),console.log("GYMS OUTSIDE CALLBACK!"),console.log(n.state.listOfGyms)},n.setGeoLocations=function(){console.log("GEO LOCATIONs"),n.state.listOfGyms.map(function(e){return w.a.fromAddress(e.address).then(function(t){var a=t.results[0].geometry.location,o=a.lat,r=a.lng;console.log("LATITUDE!!"),console.log(o,r),n.setState({geoLocations:[].concat(Object(i.a)(n.state.geoLocations),[{lat:o,lng:r,info:e}])})},function(e){console.error(e)})})},n.onToggleOpenInfoWindow=function(e,t){t&&f.a.get("".concat("/","gyms/getPlacesDetails/")+t.info.place_id).then(function(t){var a=t.data.result;console.log("-------------------------",a),console.table("-------------------------",a),n.setState({isOpen:e,ready:!0,details:a})})},n.getCurrentlyLoggedInUser=function(){n.service.currentUser().then(function(e){n.setState({currentlyLoggedIn:e})}).catch(function(){n.setState({currentlyLoggedIn:null})})},n.toggleForm=function(e){var t;t="signup"===e?"signupShowing":"loginShowing",n.setState(Object(l.a)({},t,!n.state[t]))},n.state={listOfGyms:[],geoLocations:[],currentlyLoggedIn:null,ready:!1,signupShowing:!1,loginShowing:!1,mapReady:!1,isOpen:!1,details:{}},n.service=new E,w.a.setApiKey(Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_API_URL:"https://jiu-jitsu-locator.herokuapp.com/",REACT_APP_BASE:"/"}).REACT_APP_GEO_CODE_KEY),n}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getAllGyms(),this.getCurrentlyLoggedInUser()}},{key:"render",value:function(){var e=this;return this.state.mapReady?o.a.createElement("div",null,o.a.createElement("h1",null,"Jiu-Jitsu app"),o.a.createElement(A,{geoLocations:this.state.geoLocations,onToggleOpenInfoWindow:this.onToggleOpenInfoWindow,isOpen:this.state.isOpen}),o.a.createElement(O,{theUser:this.state.currentlyLoggedIn,pleaseLogOut:function(){return e.service.logout()},toggleForm:this.toggleForm,getUser:this.getCurrentlyLoggedInUser}),this.state.signupShowing&&o.a.createElement(v,{getUser:this.getCurrentlyLoggedInUser,toggleForm:this.toggleForm}),this.state.loginShowing&&o.a.createElement(y,{getUser:this.getCurrentlyLoggedInUser,toggleForm:this.toggleForm}),o.a.createElement(U,null),o.a.createElement(p.c,null,o.a.createElement(p.a,{exact:!0,path:"/gyms",component:j,render:function(t){return o.a.createElement(j,Object.assign({},t,{theUser:e.state.currentlyLoggedIn,allTheGyms:e.state.listOfGyms}))}}),o.a.createElement(p.a,{exact:!0,path:"/gyms/:theID",render:function(t){return o.a.createElement(C,Object.assign({},t,{allTheGyms:e.state.listOfGyms,ready:e.state.ready,getData:e.getAllGyms,theUser:e.state.currentlyLoggedIn}))}}),o.a.createElement(C,{info:this.state.details})),this.state.listOfGyms.map(function(e,t){return o.a.createElement("div",{key:t})})):o.a.createElement("div",null,o.a.createElement("div",{className:"overlay"}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _=n(36);s.a.render(o.a.createElement(_.a,null,o.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[174,1,2]]]);
//# sourceMappingURL=main.e4a39cb8.chunk.js.map